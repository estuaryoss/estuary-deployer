version: '3.7'
services:
  container:
    image: dinutac/estuary-discovery:latest
    hostname: container
    #    entrypoint: tail -f /etc/alpine-release
    #    entrypoint: bash -c "/home/dev/scripts/wait-for-it.sh -t 20 eureka-server:8080 -- echo \"eureka running\" && sleep 10 && python3 /home/dev/scripts/main_flask.py"
    entrypoint: python3 /home/dev/scripts/main_flask.py
    environment:
      limit: 'sky' #example env var inserted. you can read it with environ('limit') in your jinja2 template
      EUREKA_SERVER: "{{eureka_server}}"
      APP_IP_PORT: "{{app_ip_port}}/docker/container/{{deployment_id}}"

    expose:
      - "8080"


